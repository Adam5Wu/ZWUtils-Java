buildscript {
	repositories {
		maven {
			url "https://plugins.gradle.org/m2/"
		}
	}
	dependencies {
		classpath "gradle.plugin.com.zoltu.gradle.plugin:git-versioning:2.0.1"
	}
}

apply plugin: "com.zoltu.git-versioning"

apply plugin: 'java'
apply plugin: 'eclipse'

compileJava {
	sourceCompatibility = '1.8'
}

sourceSets {
	main {
		java {
			srcDir 'main/src/java'
		}
		resources {
			srcDir 'main/res'
			include '**/*'
			srcDir 'main/src/java'
			include '**/*.properties'
		}
	}
// Currently test only works with eclipse
//	test {
//		java {
//			srcDir 'test/src/java'
//		}
//		resources {
//			srcDir 'test/res'
//		}
//	}
}

repositories {
	mavenCentral()
}

//configurations.all {
//    exclude group: 'com.esotericsoftware', module: 'kryo'
//}

dependencies {
	compile 'com.google.code.gson:gson:2.3.1'
	compile 'javax.mail:mail:1.4.7'
	compile 'org.slf4j:jul-to-slf4j:1.7.13'
	compile 'org.slf4j:slf4j-log4j12:1.7.13'
	compile 'org.apache.logging.log4j:log4j-api:2.5'
	compile 'org.apache.logging.log4j:log4j-core:2.5'
	compile 'com.googlecode.mobilityrpc:mobility-rpc:1.2.0'
	
//	compile files('lib/kryo-4.0.0-SNAPSHOT.jar')
//	compile 'com.esotericsoftware:reflectasm:1.11.0'
//	compile 'com.esotericsoftware:minlog:1.3.0'
}

allprojects {
	tasks.withType(Javadoc) {
		options.addStringOption('Xdoclint:none', '-quiet')
	}
}

javadoc {
	source = sourceSets.main.allJava
	classpath = configurations.compile
}

task sourcesJar(type: Jar, dependsOn: classes) {
	classifier = 'sources'
	from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
	classifier = 'javadoc'
	from javadoc.destinationDir
}

artifacts {
	archives sourcesJar
	archives javadocJar
}
